"use strict";(self.webpackChunkoncall_des=self.webpackChunkoncall_des||[]).push([[927],{"./src/components/Upload/stories/upload.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Def:function(){return Def},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return upload_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),dist=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),Button=__webpack_require__("./src/components/Button/Button.tsx"),Icon=__webpack_require__("./src/components/Icon/Icon.tsx"),Progress=__webpack_require__("./src/components/Progress/Progress.tsx"),UploadList=function UploadList(props){var fileList=props.fileList,onRemove=props.onRemove;return react.createElement("ul",{className:"oc-upload-list"},fileList.map((function(item){return react.createElement("li",{className:"oc-upload-list-item",key:item.uid},react.createElement("span",{className:"file-name file-name-".concat(item.status)},react.createElement(Icon.Z,{icon:"file-alt",theme:"secondary"}),item.name),react.createElement("span",{className:"file-status"},("uploading"===item.status||"ready"===item.status)&&react.createElement(Icon.Z,{icon:"spinner",spin:!0,theme:"primary"}),"success"===item.status&&react.createElement(Icon.Z,{icon:"check-circle",theme:"success"}),"error"===item.status&&react.createElement(Icon.Z,{icon:"times-circle",theme:"danger"})),react.createElement("span",{className:"file-actions"},react.createElement(Icon.Z,{icon:"times",onClick:function onClick(){onRemove(item)}})),"uploading"===item.status&&react.createElement(Progress.Z,{percent:item.percent||0}))})))},Upload_UploadList=UploadList;try{UploadList.displayName="UploadList",UploadList.__docgenInfo={description:"",displayName:"UploadList",props:{fileList:{defaultValue:null,description:"",name:"fileList",required:!0,type:{name:"UploadFile[]"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(_file: UploadFile) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Upload/UploadList.tsx#UploadList"]={docgenInfo:UploadList.__docgenInfo,name:"UploadList",path:"src/components/Upload/UploadList.tsx#UploadList"})}catch(__react_docgen_typescript_loader_error){}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Upload_dragger=function Dragger(props){var onFile=props.onFile,children=props.children,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),dragOver=_useState2[0],setDragOver=_useState2[1],classes=classnames_default()("oc-uploader-dragger",{"is-dragover":dragOver}),handleDrag=function handleDrag(e,over){e.preventDefault(),setDragOver(over)};return react.createElement("div",{className:classes,onDragOver:function onDragOver(e){handleDrag(e,!0)},onDragLeave:function onDragLeave(e){handleDrag(e,!1)},onDrop:function handleDrop(e){e.preventDefault(),setDragOver(!1),onFile(e.dataTransfer.files)}},children)};try{dragger.displayName="dragger",dragger.__docgenInfo={description:"",displayName:"dragger",props:{onFile:{defaultValue:null,description:"",name:"onFile",required:!0,type:{name:"(files: FileList) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Upload/dragger.tsx#dragger"]={docgenInfo:dragger.__docgenInfo,name:"dragger",path:"src/components/Upload/dragger.tsx#dragger"})}catch(__react_docgen_typescript_loader_error){}var Upload=function Upload(props){var action=props.action,defaultFileList=props.defaultFileList,beforeUpload=props.beforeUpload,onProgress=props.onProgress,onSuccess=props.onSuccess,onError=props.onError,onChange=props.onChange,onRemove=props.onRemove,headers=props.headers,name=props.name,data=props.data,withCredentials=props.withCredentials,accept=props.accept,multiple=props.multiple,children=props.children,drag=props.drag,fileInput=(0,react.useRef)(null),_useState=(0,react.useState)(defaultFileList||[]),_useState2=(0,slicedToArray.Z)(_useState,2),fileList=_useState2[0],setFileList=_useState2[1],updateFileList=function updateFileList(updateFile,updateObj){setFileList((function(prevList){return prevList.map((function(file){return file.uid===updateFile.uid?(0,objectSpread2.Z)((0,objectSpread2.Z)({},file),updateObj):file}))}))},uploadFile=function uploadFile(files){Array.from(files).forEach((function(file){if(beforeUpload){var result=beforeUpload(file);result&&result instanceof Promise?result.then((function(processedFile){post(processedFile)})):!1!==result&&post(file)}else post(file)}))},post=function post(file){var _file={uid:Date.now()+"upload-file",status:"ready",name:file.name,size:file.size,percent:0,raw:file};setFileList((function(prevList){return[_file].concat((0,toConsumableArray.Z)(prevList))}));var formData=new FormData;formData.append(name||"file",file),data&&Object.keys(data).forEach((function(key){formData.append(key,data[key])})),axios.Z.post(action,formData,{headers:(0,objectSpread2.Z)((0,objectSpread2.Z)({},headers),{},{"Content-Type":"multipart/form-data"}),withCredentials:withCredentials,onUploadProgress:function onUploadProgress(e){var dataTotal=e.total?e.total:1,percentage=Math.round(100*e.loaded/dataTotal)||0;percentage<100&&(updateFileList(_file,{percent:percentage,status:"uploading"}),onProgress&&onProgress(percentage,file))}}).then((function(resp){updateFileList(_file,{status:"success",response:resp.data}),onSuccess&&onSuccess(resp.data,file),onChange&&onChange(file)})).catch((function(err){updateFileList(_file,{status:"error",error:err}),console.error(err),onError&&onError(err,file),onChange&&onChange(file)}))};return react.createElement("div",{className:"oc-upload-component"},react.createElement("div",{className:"oc-upload-input",style:{display:"inline-block"},onClick:function handleClick(){fileInput.current&&fileInput.current.click()}},drag?react.createElement(Upload_dragger,{onFile:function onFile(files){uploadFile(files)}},children):react.createElement(Button.Z,{btnType:"default"},children),react.createElement("input",{className:"oc-file-input",style:{display:"none"},ref:fileInput,onChange:function handleFileChange(e){var files=e.target.files;files&&(uploadFile(files),fileInput.current&&(fileInput.current.value=""))},type:"file",accept:accept,multiple:multiple})),react.createElement(Upload_UploadList,{fileList:fileList,onRemove:function handleRemove(file){setFileList((function(prevList){return prevList.filter((function(item){return item.uid!==file.uid}))})),onRemove&&onRemove(file)}}))};Upload.defaultProps={name:"file"};var _Def$parameters,_Def$parameters2,_Def$parameters2$docs,Upload_Upload=Upload;try{Upload.displayName="Upload",Upload.__docgenInfo={description:"",displayName:"Upload",props:{action:{defaultValue:null,description:"",name:"action",required:!0,type:{name:"string"}},defaultFileList:{defaultValue:null,description:"",name:"defaultFileList",required:!1,type:{name:"UploadFile[]"}},beforeUpload:{defaultValue:null,description:"",name:"beforeUpload",required:!1,type:{name:"((file: File) => boolean | Promise<File>)"}},onProgress:{defaultValue:null,description:"",name:"onProgress",required:!1,type:{name:"((percentage: number, file: UploadFile) => void)"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"((data: any, file: UploadFile) => void)"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"((err: number, file: UploadFile) => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((file: UploadFile) => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((file: UploadFile) => void)"}},headers:{defaultValue:null,description:"",name:"headers",required:!1,type:{name:"{ [key: string]: any; }"}},name:{defaultValue:{value:"file"},description:"",name:"name",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"{ [key: string]: any; }"}},withCredentials:{defaultValue:null,description:"",name:"withCredentials",required:!1,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},drag:{defaultValue:null,description:"",name:"drag",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Upload/Upload.tsx#Upload"]={docgenInfo:Upload.__docgenInfo,name:"Upload",path:"src/components/Upload/Upload.tsx#Upload"})}catch(__react_docgen_typescript_loader_error){}var upload_stories={title:"Form表单组件/Upload",component:Upload_Upload,tags:["autodocs"]},Def={args:{action:"https://jsonplaceholder.typicode.com/posts/",onChange:(0,dist.aD)("changed"),beforeUpload:function checkFileSize(file){return!(Math.round(file.size/1024)>5e3)||(alert("file too big"),!1)},defaultFileList:[{uid:"123",size:1234,name:"hello.md",status:"uploading",percent:0},{uid:"122",size:1234,name:"xyz.md",status:"success",percent:30},{uid:"121",size:1234,name:"eyiha.md",status:"error",percent:30}],name:"filename",data:{key:"value"},headers:{"X-Powered-By":"hyh"},accept:".png",drag:!0,children:"dragger"}};Def.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Def.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Def$parameters=Def.parameters)||void 0===_Def$parameters?void 0:_Def$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"{\n  args: {\n    action: 'https://jsonplaceholder.typicode.com/posts/',\n    // onProgress: action('Progress'),\n    // onSuccess: action('Success'),\n    // onError: action('Errors'),\n    onChange: action('changed'),\n    beforeUpload: checkFileSize,\n    defaultFileList: defaultFileList,\n    name: 'filename',\n    data: {\n      key: 'value'\n    },\n    headers: {\n      'X-Powered-By': 'hyh'\n    },\n    accept: '.png',\n    // multiple: true\n    drag: true,\n    children: 'dragger'\n  }\n}"},null===(_Def$parameters2=Def.parameters)||void 0===_Def$parameters2||null===(_Def$parameters2$docs=_Def$parameters2.docs)||void 0===_Def$parameters2$docs?void 0:_Def$parameters2$docs.source)})});var __namedExportsOrder=["Def"]},"./src/components/Button/Button.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_excluded=["loading","btnType","className","disabled","size","children","href"],Button=function Button(props){var _classNames,_props$loading=props.loading,loading=void 0!==_props$loading&&_props$loading,btnType=props.btnType,className=props.className,disabled=props.disabled,size=props.size,children=props.children,href=props.href,restProps=(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__.Z)(props,_excluded),classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("oc-btn",className,(_classNames={},(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_classNames,"oc-btn-".concat(btnType),btnType),(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_classNames,"oc-btn-".concat(size),size),(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_classNames,"disabled","link"===btnType&&disabled),(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_3__.Z)(_classNames,"loading",loading),_classNames));return"link"===btnType&&href?react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",Object.assign({className:classes,href:href},restProps),children):react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",Object.assign({type:"button",className:classes,disabled:disabled},restProps),children)};Button.defaultProps={disabled:!1,btnType:"default"},__webpack_exports__.Z=Button;try{Button.displayName="Button",Button.__docgenInfo={description:"页面中最常用的的按钮元素，适合于完成特定的交互\n### 引用方法",displayName:"Button",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"设置 Button 的禁用",name:"disabled",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"设置 Button 的尺寸",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'}]}},btnType:{defaultValue:{value:"default"},description:"设置 Button 的类型",name:"btnType",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"danger"'},{value:'"link"'},{value:'"default"'}]}},shape:{defaultValue:null,description:"",name:"shape",required:!1,type:{name:"enum",value:[{value:'"circle"'},{value:'"round"'},{value:'"default"'}]}},href:{defaultValue:null,description:"",name:"href",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean | { delay?: number; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Button/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/components/Button/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Icon/Icon.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_excluded=["className","theme"],Icon=function Icon(props){var className=props.className,theme=props.theme,restProps=(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_3__.Z)(props,_excluded),classes=classnames__WEBPACK_IMPORTED_MODULE_2___default()("oc-icon",className,(0,D_GitHub_Warehouse_UI_oncall_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_4__.Z)({},"oc-icon-".concat(theme),theme));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__.G,Object.assign({className:classes},restProps))};Icon.defaultProps={theme:"secondary"},__webpack_exports__.Z=Icon;try{Icon.displayName="Icon",Icon.__docgenInfo={description:"",displayName:"Icon",props:{theme:{defaultValue:{value:"secondary"},description:"设置 icon 的主题",name:"theme",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"info"'},{value:'"warning"'},{value:'"danger"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Icon/Icon.tsx#Icon"]={docgenInfo:Icon.__docgenInfo,name:"Icon",path:"src/components/Icon/Icon.tsx#Icon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Progress/Progress.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),Progress=function Progress(props){var percent=props.percent,strokeHeight=props.strokeHeight,showText=props.showText,styles=props.styles,theme=props.theme;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"oc-progress-bar",style:styles},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"oc-progress-bar-outer",style:{height:"".concat(strokeHeight,"px")}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"oc-progress-bar-inner color-".concat(theme),style:{width:"".concat(percent,"%")}},showText&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"inner-text"},"".concat(percent,"%")))))};Progress.defaultProps={strokeHeight:14,theme:"primary",showText:!0},__webpack_exports__.Z=Progress;try{Progress.displayName="Progress",Progress.__docgenInfo={description:"\nProgress组件,显示进度",displayName:"Progress",props:{percent:{defaultValue:null,description:"进度条进度百分比",name:"percent",required:!0,type:{name:"number"}},strokeHeight:{defaultValue:{value:"14"},description:"",name:"strokeHeight",required:!1,type:{name:"number"}},showText:{defaultValue:{value:"true"},description:"是否显示数字",name:"showText",required:!1,type:{name:"boolean"}},styles:{defaultValue:null,description:"自定义样式",name:"styles",required:!1,type:{name:"CSSProperties"}},theme:{defaultValue:{value:"primary"},description:"主题色",name:"theme",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"info"'},{value:'"warning"'},{value:'"danger"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Progress/Progress.tsx#Progress"]={docgenInfo:Progress.__docgenInfo,name:"Progress",path:"src/components/Progress/Progress.tsx#Progress"})}catch(__react_docgen_typescript_loader_error){}}}]);